import{n as j,s as X,a as Z,r as $,i as ee,t as O,S as te,b as ne,e as P,c as D,g as I,d as k,f as R,h as E,j as Y,k as se,l as re,o as oe,m as T,p as A,q,u as z,v as H,w as x,x as U}from"./common/index-426d498a.js";function ie(e){if(!e)throw Error("Parameter args is required");if(!e.component==!e.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(e.component&&(e.asyncComponent=()=>Promise.resolve(e.component)),typeof e.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(e.conditions){Array.isArray(e.conditions)||(e.conditions=[e.conditions]);for(let n=0;n<e.conditions.length;n++)if(!e.conditions[n]||typeof e.conditions[n]!="function")throw Error("Invalid parameter conditions["+n+"]")}return e.loadingComponent&&(e.asyncComponent.loading=e.loadingComponent,e.asyncComponent.loadingParams=e.loadingParams||void 0),{component:e.asyncComponent,userData:e.userData,conditions:e.conditions&&e.conditions.length?e.conditions:void 0,props:e.props&&Object.keys(e.props).length?e.props:{},_sveltesparouter:!0}}const v=[];function F(e,t){return{subscribe:M(e,t).subscribe}}function M(e,t=j){let n;const o=new Set;function c(s){if(X(e,s)&&(e=s,n)){const r=!v.length;for(const i of o)i[1](),v.push(i,e);if(r){for(let i=0;i<v.length;i+=2)v[i][0](v[i+1]);v.length=0}}}function l(s){c(s(e))}function p(s,r=j){const i=[s,r];return o.add(i),o.size===1&&(n=t(c)||j),s(e),()=>{o.delete(i),o.size===0&&(n(),n=null)}}return{set:c,update:l,subscribe:p}}function W(e,t,n){const o=!Array.isArray(e),c=o?[e]:e,l=t.length<2;return F(n,p=>{let s=!1;const r=[];let i=0,h=j;const S=()=>{if(i)return;h();const _=t(o?r[0]:r,p);l?p(_):h=ee(_)?_:j},y=c.map((_,w)=>Z(_,C=>{r[w]=C,i&=~(1<<w),s&&S()},()=>{i|=1<<w}));return s=!0,S(),function(){$(y),h()}})}function ce(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,o,c,l,p=[],s="",r=e.split("/");for(r[0]||r.shift();c=r.shift();)n=c[0],n==="*"?(p.push("wild"),s+="/(.*)"):n===":"?(o=c.indexOf("?",1),l=c.indexOf(".",1),p.push(c.substring(1,~o?o:~l?l:c.length)),s+=!!~o&&!~l?"(?:/([^/]+?))?":"/([^/]+?)",~l&&(s+=(~o?"?":"")+"\\"+c.substring(l))):s+="/"+c;return{keys:p,pattern:new RegExp("^"+s+(t?"(?=$|/)":"/?$"),"i")}}function le(e){let t,n,o;const c=[e[2]];var l=e[0];function p(s){let r={};for(let i=0;i<c.length;i+=1)r=U(r,c[i]);return{props:r}}return l&&(t=new l(p()),t.$on("routeEvent",e[7])),{c(){t&&A(t.$$.fragment),n=P()},m(s,r){t&&q(t,s,r),D(s,n,r),o=!0},p(s,r){const i=r&4?z(c,[H(s[2])]):{};if(l!==(l=s[0])){if(t){I();const h=t;k(h.$$.fragment,1,0,()=>{x(h,1)}),R()}l?(t=new l(p()),t.$on("routeEvent",s[7]),A(t.$$.fragment),E(t.$$.fragment,1),q(t,n.parentNode,n)):t=null}else l&&t.$set(i)},i(s){o||(t&&E(t.$$.fragment,s),o=!0)},o(s){t&&k(t.$$.fragment,s),o=!1},d(s){s&&Y(n),t&&x(t,s)}}}function ae(e){let t,n,o;const c=[{params:e[1]},e[2]];var l=e[0];function p(s){let r={};for(let i=0;i<c.length;i+=1)r=U(r,c[i]);return{props:r}}return l&&(t=new l(p()),t.$on("routeEvent",e[6])),{c(){t&&A(t.$$.fragment),n=P()},m(s,r){t&&q(t,s,r),D(s,n,r),o=!0},p(s,r){const i=r&6?z(c,[r&2&&{params:s[1]},r&4&&H(s[2])]):{};if(l!==(l=s[0])){if(t){I();const h=t;k(h.$$.fragment,1,0,()=>{x(h,1)}),R()}l?(t=new l(p()),t.$on("routeEvent",s[6]),A(t.$$.fragment),E(t.$$.fragment,1),q(t,n.parentNode,n)):t=null}else l&&t.$set(i)},i(s){o||(t&&E(t.$$.fragment,s),o=!0)},o(s){t&&k(t.$$.fragment,s),o=!1},d(s){s&&Y(n),t&&x(t,s)}}}function ue(e){let t,n,o,c;const l=[ae,le],p=[];function s(r,i){return r[1]?0:1}return t=s(e),n=p[t]=l[t](e),{c(){n.c(),o=P()},m(r,i){p[t].m(r,i),D(r,o,i),c=!0},p(r,[i]){let h=t;t=s(r),t===h?p[t].p(r,i):(I(),k(p[h],1,1,()=>{p[h]=null}),R(),n=p[t],n?n.p(r,i):(n=p[t]=l[t](r),n.c()),E(n,1),n.m(o.parentNode,o))},i(r){c||(E(n),c=!0)},o(r){k(n),c=!1},d(r){p[t].d(r),r&&Y(o)}}}function fe(e,t,...n){return ie({component:e,userData:t,conditions:n})}function B(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let o="";return n>-1&&(o=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:o}}const L=F(null,function(t){t(B());const n=()=>{t(B())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}}),pe=W(L,e=>e.location),he=W(L,e=>e.querystring),N=M(void 0);async function de(e){if(!e||e.length<1||e.charAt(0)!="/"&&e.indexOf("#/")!==0)throw Error("Invalid parameter location");await O(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0,void 0),window.location.hash=(e.charAt(0)=="#"?"":"#")+e}async function _e(){await O(),window.history.back()}async function me(e){if(!e||e.length<1||e.charAt(0)!="/"&&e.indexOf("#/")!==0)throw Error("Invalid parameter location");await O();const t=(e.charAt(0)=="#"?"":"#")+e;try{const n={...history.state};delete n.__svelte_spa_router_scrollX,delete n.__svelte_spa_router_scrollY,window.history.replaceState(n,void 0,t)}catch(n){}window.dispatchEvent(new Event("hashchange"))}function we(e,t){if(t=J(t),!e||!e.tagName||e.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return G(e,t),{update(n){n=J(n),G(e,n)}}}function G(e,t){let n=t.href||e.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);e.setAttribute("href",n),e.addEventListener("click",o=>{o.preventDefault(),t.disabled||be(o.currentTarget.getAttribute("href"))})}function J(e){return e&&typeof e=="string"?{href:e}:e||{}}function be(e){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0,void 0),window.location.hash=e}function ye(e,t,n){let{routes:o={}}=t,{prefix:c=""}=t,{restoreScrollState:l=!1}=t;class p{constructor(a,u){if(!u||typeof u!="function"&&(typeof u!="object"||u._sveltesparouter!==!0))throw Error("Invalid component object");if(!a||typeof a=="string"&&(a.length<1||a.charAt(0)!="/"&&a.charAt(0)!="*")||typeof a=="object"&&!(a instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:m,keys:d}=ce(a);this.path=a,typeof u=="object"&&u._sveltesparouter===!0?(this.component=u.component,this.conditions=u.conditions||[],this.userData=u.userData,this.props=u.props||{}):(this.component=()=>Promise.resolve(u),this.conditions=[],this.props={}),this._pattern=m,this._keys=d}match(a){if(c){if(typeof c=="string")if(a.startsWith(c))a=a.substr(c.length)||"/";else return null;else if(c instanceof RegExp){const b=a.match(c);if(b&&b[0])a=a.substr(b[0].length)||"/";else return null}}const u=this._pattern.exec(a);if(u===null)return null;if(this._keys===!1)return u;const m={};let d=0;for(;d<this._keys.length;){try{m[this._keys[d]]=decodeURIComponent(u[d+1]||"")||null}catch(b){m[this._keys[d]]=null}d++}return m}async checkConditions(a){for(let u=0;u<this.conditions.length;u++)if(!await this.conditions[u](a))return!1;return!0}}const s=[];o instanceof Map?o.forEach((f,a)=>{s.push(new p(a,f))}):Object.keys(o).forEach(f=>{s.push(new p(f,o[f]))});let r=null,i=null,h={};const S=se();async function y(f,a){await O(),S(f,a)}let _=null,w=null;l&&(w=f=>{f.state&&f.state.__svelte_spa_router_scrollY?_=f.state:_=null},window.addEventListener("popstate",w),re(()=>{_?window.scrollTo(_.__svelte_spa_router_scrollX,_.__svelte_spa_router_scrollY):window.scrollTo(0,0)}));let C=null,g=null;const K=L.subscribe(async f=>{C=f;let a=0;for(;a<s.length;){const u=s[a].match(f.location);if(!u){a++;continue}const m={route:s[a].path,location:f.location,querystring:f.querystring,userData:s[a].userData,params:u&&typeof u=="object"&&Object.keys(u).length?u:null};if(!await s[a].checkConditions(m)){n(0,r=null),g=null,y("conditionsFailed",m);return}y("routeLoading",Object.assign({},m));const d=s[a].component;if(g!=d){d.loading?(n(0,r=d.loading),g=d,n(1,i=d.loadingParams),n(2,h={}),y("routeLoaded",Object.assign({},m,{component:r,name:r.name,params:i}))):(n(0,r=null),g=null);const b=await d();if(f!=C)return;n(0,r=b&&b.default||b),g=d}u&&typeof u=="object"&&Object.keys(u).length?n(1,i=u):n(1,i=null),n(2,h=s[a].props),y("routeLoaded",Object.assign({},m,{component:r,name:r.name,params:i})).then(()=>{N.set(i)});return}n(0,r=null),g=null,N.set(void 0)});oe(()=>{K(),w&&window.removeEventListener("popstate",w)});function Q(f){T.call(this,e,f)}function V(f){T.call(this,e,f)}return e.$$set=f=>{"routes"in f&&n(3,o=f.routes),"prefix"in f&&n(4,c=f.prefix),"restoreScrollState"in f&&n(5,l=f.restoreScrollState)},e.$$.update=()=>{e.$$.dirty&32&&(history.scrollRestoration=l?"manual":"auto")},[r,i,h,o,c,l,Q,V]}class ge extends te{constructor(t){super();ne(this,t,ye,ue,X,{routes:3,prefix:4,restoreScrollState:5})}}export default ge;export{we as link,L as loc,pe as location,N as params,_e as pop,de as push,he as querystring,me as replace,fe as wrap};
